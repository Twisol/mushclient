<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient[
  <!ENTITY prompt_regexp "(?m)^.*&lt;.+hp .+m .+mv .+xp&gt; \\z" > 
]>
<!-- MuClient version 3.59 -->

<!-- Plugin "Add_Newline_To_Prompt_2" generated by Plugin Wizard -->

<muclient>
<plugin
   name="Add_Newline_To_Prompt_2"
   author="Nick Gammon"
   id="a14e9768c3ad5ce50d202ee0"
   language="Lua"
   purpose="Adds a newline to prompt lines"
   date_written="2004-12-13 14:27"
   requires="3.59"
   version="1.0"
   >
<description trim="y">
Detects prompt lines without a newline, and if found, adds one.

Change ENTITY line on 3rd line of plugin to be a regular expression 
that matches your prompt.

</description>

</plugin>

<!--  Script  -->

<script>

  re = rex.new ("&prompt_regexp;")

<![CDATA[

function OnPluginPacketReceived (s)

  if (re:match (s)) then
     return s .. "\n"	
  else
    return s
  end -- if 
  
end -- function OnPluginPacketReceived
]]>
</script>

</muclient>
